import{c as R,h as J,a as he}from"./render.390dd149.js";import{c as i,h as C,r as E,G as V,M as X,g as Y,Q as Z,w as W,L as be,T as ke,o as ye}from"./index.cd412eb4.js";import{u as p,a as ee,b as qe,d as xe,e as Ce,v as N,f as we,h as Be,i as Ee,j as Se,k as Te,l as Pe,m as Oe,n as _e,o as Fe,r as U,q as Le,s as Ke,t as G,w as Re,x as Me,y as Ae}from"./format.7223076b.js";import{u as De,b as Qe,c as $e}from"./QBtn.27037d6f.js";var Xe=R({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:u}){const s=i(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>C("div",{class:s.value},J(u.default))}}),Ye=R({name:"QItem",props:{...p,...De,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:u,emit:s}){const{proxy:{$q:g}}=Y(),c=ee(e,g),{hasLink:r,linkAttrs:d,linkClass:b,linkTag:w,navigateOnClick:k}=Qe(),a=E(null),o=E(null),l=i(()=>e.clickable===!0||r.value===!0||e.tag==="label"),f=i(()=>e.disable!==!0&&l.value===!0),S=i(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(c.value===!0?" q-item--dark":"")+(r.value===!0&&e.active===null?b.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(f.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),T=i(()=>{if(e.insetLevel===void 0)return null;const n=g.lang.rtl===!0?"Right":"Left";return{["padding"+n]:16+e.insetLevel*56+"px"}});function P(n){f.value===!0&&(o.value!==null&&(n.qKeyEvent!==!0&&document.activeElement===a.value?o.value.focus():document.activeElement===o.value&&a.value.focus()),k(n))}function B(n){if(f.value===!0&&V(n,[13,32])===!0){X(n),n.qKeyEvent=!0;const y=new MouseEvent("click",n);y.qKeyEvent=!0,a.value.dispatchEvent(y)}s("keyup",n)}function O(){const n=he(u.default,[]);return f.value===!0&&n.unshift(C("div",{class:"q-focus-helper",tabindex:-1,ref:o})),n}return()=>{const n={ref:a,class:S.value,style:T.value,role:"listitem",onClick:P,onKeyup:B};return f.value===!0?(n.tabindex=e.tabindex||"0",Object.assign(n,d.value)):l.value===!0&&(n["aria-disabled"]="true"),C(w.value,n,O())}}});const v=[];let h;function je(e){h=e.keyCode===27}function He(){h===!0&&(h=!1)}function Ie(e){h===!0&&(h=!1,V(e,27)===!0&&v[v.length-1](e))}function te(e){window[e]("keydown",je),window[e]("blur",He),window[e]("keyup",Ie),h=!1}function We(e){Z.is.desktop===!0&&(v.push(e),v.length===1&&te("addEventListener"))}function z(e){const u=v.indexOf(e);u>-1&&(v.splice(u,1),v.length===0&&te("removeEventListener"))}const m=[];function ne(e){m[m.length-1](e)}function Ne(e){Z.is.desktop===!0&&(m.push(e),m.length===1&&document.body.addEventListener("focusin",ne))}function Ue(e){const u=m.indexOf(e);u>-1&&(m.splice(u,1),m.length===0&&document.body.removeEventListener("focusin",ne))}var Ze=R({name:"QMenu",inheritAttrs:!1,props:{...qe,...xe,...p,...Ce,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:N},self:{type:String,validator:N},offset:{type:Array,validator:we},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Be,"click","escapeKey"],setup(e,{slots:u,emit:s,attrs:g}){let c=null,r,d,b;const w=Y(),{proxy:k}=w,{$q:a}=k,o=E(null),l=E(!1),f=i(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),S=ee(e,a),{registerTick:T,removeTick:P}=Ee(),{registerTimeout:B}=Se(),{transitionProps:O,transitionStyle:n}=Te(e),{localScrollTarget:y,changeScrollEvent:ae,unconfigureScrollTarget:oe}=Pe(e,H),{anchorEl:q,canShow:ue}=Oe({showing:l}),{hide:M}=_e({showing:l,canShow:ue,handleShow:re,handleHide:de,hideOnRouteChange:f,processOnMount:!0}),{showPortal:A,hidePortal:D,renderPortal:ie}=Fe(w,o,ve,"menu"),_={anchorEl:q,innerRef:o,onClickOutside(t){if(e.persistent!==!0&&l.value===!0)return M(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&X(t),!0}},Q=i(()=>G(e.anchor||(e.cover===!0?"center middle":"bottom start"),a.lang.rtl)),le=i(()=>e.cover===!0?Q.value:G(e.self||"top start",a.lang.rtl)),se=i(()=>(e.square===!0?" q-menu--square":"")+(S.value===!0?" q-menu--dark q-dark":"")),ce=i(()=>e.autoClose===!0?{onClick:fe}:{}),$=i(()=>l.value===!0&&e.persistent!==!0);W($,t=>{t===!0?(We(L),Re(_)):(z(L),U(_))});function F(){Me(()=>{let t=o.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function re(t){if(c=e.noRefocus===!1?document.activeElement:null,Ne(I),A(),H(),r=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const K=be(t);if(K.left!==void 0){const{top:me,left:ge}=q.value.getBoundingClientRect();r={left:K.left-ge,top:K.top-me}}}d===void 0&&(d=W(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,x)),e.noFocus!==!0&&document.activeElement.blur(),T(()=>{x(),e.noFocus!==!0&&F()}),B(()=>{a.platform.is.ios===!0&&(b=e.autoClose,o.value.click()),x(),A(!0),s("show",t)},e.transitionDuration)}function de(t){P(),D(),j(!0),c!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t&&t.type.indexOf("key")===0?c.closest('[tabindex]:not([tabindex^="-"])'):void 0)||c).focus(),c=null),B(()=>{D(!0),s("hide",t)},e.transitionDuration)}function j(t){r=void 0,d!==void 0&&(d(),d=void 0),(t===!0||l.value===!0)&&(Ue(I),oe(),U(_),z(L)),t!==!0&&(c=null)}function H(){(q.value!==null||e.scrollTarget!==void 0)&&(y.value=Le(q.value,e.scrollTarget),ae(y.value,x))}function fe(t){b!==!0?(Ae(k,t),s("click",t)):b=!1}function I(t){$.value===!0&&e.noFocus!==!0&&$e(o.value,t.target)!==!0&&F()}function L(t){s("escapeKey"),M(t)}function x(){Ke({targetEl:o.value,offset:e.offset,anchorEl:q.value,anchorOrigin:Q.value,selfOrigin:le.value,absoluteOffset:r,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ve(){return C(ke,O.value,()=>l.value===!0?C("div",{role:"menu",...g,ref:o,tabindex:-1,class:["q-menu q-position-engine scroll"+se.value,g.class],style:[g.style,n.value],...ce.value},J(u.default)):null)}return ye(j),Object.assign(k,{focus:F,updatePosition:x}),ie}});export{Ze as Q,Ye as a,Xe as b,z as c,Ne as d,We as e,Ue as r};
